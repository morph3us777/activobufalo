import{A as u,B as h,a as i,n as r,o as g,p as y,q as v,r as I,s as F,v as R,w as T,x as w,y as x,z as E}from"./chunk-J4CMXECL.js";r();r();var G="9db678ead8df7631e47f471f074ea689",O="forms-frontend-app-embed",H="production",L="dfbe7d8be576ccfddfbf99f9cc96f32bdf0dc0b9",U=i((e=!0)=>{let t=["production","staging","staging_qtfb","staging_avwf"];T()||t.push("development"),g.start({apiKey:G,appId:O,appVersion:L,releaseStage:H,trackConsoleErrors:e,enabledReleaseStages:t,endpoints:{notify:"https://error-analytics-production.shopifysvc.com",sessions:"https://error-analytics-sessions-production.shopifysvc.com"}})},"initBugsnagClient"),S=U;r();var A="forms_visit_count",q=i(e=>v(A,e),"setVisitCountValue"),p=i(()=>{let e=I(A);return e?parseInt(e,10):0},"getSessionVisitCountValue"),P=i(()=>{let e=w()||"unknown",t=x(),n=p();(t!==e||!t)&&(n=0,E(e));let s=n+1;q(s)},"incrementVisitCount");r();r();var N=i(()=>{var n;let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(((n=window==null?void 0:window.navigator)==null?void 0:n.userAgent)||""),t=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches;return e||t},"isMobile"),_=i(e=>!e||e==="all"?!0:N()?e==="mobile":e==="desktop","executeDeviceTypeFilter");r();var b=i(e=>p()>=e.showAfter,"executeVisitFilter");r();function D(e){let t=e.includePageTypes;return e.showOnAllPageTypes||!t?{shouldTrigger:!0,delay:e.delay}:{shouldTrigger:t==null?void 0:t.includes(h()),delay:e.delay}}i(D,"executePageTypeRule");r();var C=i((e,t)=>{let n=i(o=>{o.clientY<=150&&(window.ShopifyForms={...window.ShopifyForms,triggerExitIntent:!0},t(),document.dispatchEvent(s),document.removeEventListener("mouseleave",n))},"handler"),s=new Event(`forms:exit-intent:${e}`);document.addEventListener("mouseleave",n)},"detectExitIntent");r();var V=i(e=>new Promise(t=>setTimeout(t,e)),"waitFor");var d=i(async(e,t,n)=>{let{triggers:s,filters:o}=t,a=!1;if(!s.navigation||!_(o.device))return!1;let l=D(s.navigation);return l.shouldTrigger?(s.displayDetectLeave&&(C(e,n),a=!0),(o.visit?b(o.visit):!0)?(await V(l.delay),n(),!0):a):!1},"executeDisplayRules");r();var f=i(e=>{let t=`[data-forms-id=forms-root-${e}]`,n=document.querySelectorAll(t);return Array.from(n)},"getAllInlineContainers");S(!1);var M=i(async(e,t,n,s,o)=>{if(document.getElementById(`app-embed-container-${e}`)&&n.form.layout!=="inline")return;let{setupApp:c}=await import("./App-K4JAKC2Z.js");c(e,t,n,o,s)},"importAndRenderApp"),B=i(async(e,t,n,s,o)=>{let{setupApp:a}=await import("./App-K4JAKC2Z.js");for(let c of o)a(e,t,n,c,s)},"importAndRenderInlineForms"),Y=!1;(async()=>{try{let t=await new R({version:2,retries:3}).getMultipleInstances();if(!t||!t.formInstances)return;let{formInstances:n,clientCountry:s}=t;P(),Y?await $(n,s):await K(n,s)}catch(e){if(e instanceof F&&e.status===404)return;y.fromError(e).notify()}})();async function K(e,t){return Promise.all(e.map(async n=>{let{id:s,styles:o,formDefinition:a,displayRules:c}=n,l=f(s),m=a.form.layout==="inline";if(m&&(l==null?void 0:l.length)>0)return B(s,o,a,t,l);if(!(m&&l.length<1||new u(s).isFormDismissed()))return d(s,c,async()=>{await M(s,o,a,t)})}))}i(K,"renderAllForms");async function $(e,t){let n=!1;for(let s of e){let{id:o,styles:a,formDefinition:c,displayRules:l}=s,m=f(o);if(c.form.layout==="inline"&&(m==null?void 0:m.length)>0){B(o,a,c,t,m);continue}if(n)return;new u(o).isFormDismissed()||(n=await d(o,l,async()=>{await M(o,a,c,t)}))}}i($,"renderFormsByPriority");
//# sourceMappingURL=index.js.map
